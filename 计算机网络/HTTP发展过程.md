# HTTP发展过程

## 一、http 1.0

**缺陷**：

1、短连接：每个请求使用单独的TCP连接，都要进行连接的建立和释放，服务器必须维持多个连接

## 二、http 1.1

**改进**：

1、长连接：一个TCP连接可以处理多个请求

**缺陷**：

1、队头阻塞：多个请求在同一个TCP管道中传输的，当出现丢包时，后面的所有数据包都要等待这个包重传，造成了阻塞

并且1.1版本中，需要等待A请求的数据完全传输完再传输B请求的数据，尽管B请求已经准备就绪，这样效率就更低

比如一个数据报丢报了，那么后面的数据报都要等待这个数据报重传

## 三、http 2.0

**改进**：

1、二进制传输：http1.x采用纯文本传输，http2.0采用二进制传输，可以将信息分割为帧，为多路复用提供了基础，提高传输效率

2、多路复用：http2.0将消息分割为帧，并通过不同的流传输，一个TCP连接可以传输多个流。同一个流中的帧有序，不同流之间的帧可以无序

不过，这只解决了http层面的队头阻塞，仍然存在tcp层面的队头阻塞。因为http2.0的底层传输协议仍是tcp，所以应用层的http消息虽然可以乱序发送，但底层的tcp传输仍要保持顺序

并且http2.0将同一域名下的连接都复用同一个TCP连接，虽然解决了http1.1中一个域名最多6个TCP连接的限制，但是发生队头阻塞时造成的影响可能更加严重

3、服务端推送：服务端根据客户端的请求，提前返回多个响应，推送额外的资源给客户端

4、首部压缩：使用压缩算法压缩头部，节省请求头占用的带宽

**缺陷**：

1、基于TCP连接，连接时间过长：三次握手导致

2、队头阻塞

## 四、http 3.0

基于 UDP 协议的“QUIC”协议

**改进**：

1、采用UDP：节省了建立连接的时间，可在应用层保证数据可靠性

2、解决队头阻塞：因为udp传输过程中不需要保证有序，http 3.0中，一个流中的数据包阻塞只会阻塞当前流，而不会影响其他流，而http 2.0中会阻塞所有流。所以彻底解决了队头阻塞问题

