# 键入网址到网页显示的过程

## 一、键入网址到网页显示的过程

### 1、解析URL

URL分为三部分：**协议**(http/https)，主机**域名**(www.baidu.com)，**路径名**(index.html)

### 2、解析域名获取服务器IP

即通过DNS请求获取域名对应的IP

首先检查3个地方有没有缓存，浏览器缓存、操作系统缓存、本地host文件

如果没有，则请求本地DNS服务器

如果仍然没有，就需要通过递归服务器访问根域名服务器、顶级域名服务器、权威域名服务器来获取IP地址

- **根域名服务器**：根据顶级域名(如.com/.cn)分配给不同的顶级域名服务器解析

- **顶级域名服务器**：分配给权威域名服务器解析

- **权威域名服务器**：解析并返回给本地DNS服务器

### 3、浏览器与服务器建立TCP连接

因为HTTP一般是基于TCP协议的，所以要先进行TCP的三次握手

在传输数据包时

网络层通过路由器识别IP地址进行路由选择

数据链路层通过交换机识别MAC地址进行局域网内的数据交换

传输层根据端口号确定建立通信的应用

### 4、请求与响应

### 5、浏览器渲染网页

### 6、释放TCP连接

最后通信完毕，双方通过四次挥手来释放TCP连接

## 二、如果网页没有显示，如何去排查问题

### 1、确定是服务端的问题还是客户端的问题

如果其他网站可以正常访问，说明是服务端的问题

反之说明是客户端的问题，需要首先检查网络连接是否正常

### 2、抓包查找问题

如果网络连接正常，那么需要查看DNS解析是否正确

- 一是看自己输入的网址有没有错误
- 二是看DNS请求有没有正确的响应

下一步就是查看http响应报文的状态码

- 如果是200，说明浏览器有问题，导致无法正常渲染网页
- 如果是404，说明路径名有问题
- 如果是500，说明服务器有问题

### 3、查看网络流量大小

如果电脑后台在进行下载任务等，会占用很多流量，导致网页加载很慢，甚至产生丢包
