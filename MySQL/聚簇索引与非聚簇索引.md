# 聚簇索引与非聚簇索引

**聚簇索引和非聚簇索引并不是某种单独类型的索引，只是索引在数据存储方式上的一种分类。比如主键索引是聚簇索引，其他自行创建的索引都属于非聚簇索引**

### 1、聚簇索引

聚簇索引默认是主键，如果表中没有定义主键，InnoDB会选择一个唯一的非空索引代替。如果没有这样的索引，InnoDB会隐式定义一个主键来作为聚簇索引

**优点**：

1、查找速度快，聚簇索引查找数据只用查找一次，即通过主键找到对应的数据；非聚簇索引需要先通过索引找到主键，再根据主键找到数据

**缺点**：

1、插入速度严重依赖于插入顺序，按照主键的顺序插入是最快的方式，否则将会出现页分裂，严重影响性能。因此对于InnoDB表，一般都会定义一个自增的ID列为主键

2、更新主键的代价很高，因为将会导致被更新的行移动。因此对于InnoDB表，一般定义主键为不可更新

### 2、非聚簇索引

也称**辅助索引**、**二级索引**，在聚簇索引之上创建的索引称为辅助索引，辅助索引的存在不影响数据在聚簇索引中的组织

**存在的原因**：当数据库一条记录里包含多个字段时，如果检索的是非主键字段，则主键索引失去作用，又变成顺序查找了，这时应该建立辅助索引

### **3、区别**

聚簇索引只有一个；非聚簇索引可以有多个

聚簇索引查询速度快，只需要查询一次即可找到数据；非聚簇索引查询速度慢，需要先查询一次找到主键，再由聚簇索引查询一次找到数据

聚簇索引创建和更新代价大；非聚簇索引代价小

聚簇索引叶子节点存储的是数据；非聚簇索引叶子节点存储的是主键+索引
