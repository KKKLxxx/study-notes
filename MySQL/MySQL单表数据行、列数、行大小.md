# MySQL单表数据行、列数、行大小

## 一、数据行

### 1、单表数据量上限

MySQL是没有对单表数据量进行限制的，其上限取决于系统对文件大小的限制和硬盘容量的限制

### 2、数据量过大时为什么查询会变慢

1、虽然MySQL可以通过索引提高查询效率，但是使用索引的时候需要把索引加载到内存中。数据量过大时，索引可能无法一次性加载到内存中，就会造成磁盘IO，降低了查询速度

2、B+树高度在3层的时候，大概可以存储2000w条数据，更多的数据会使B+树的高度增加，磁盘IO次数也就更多

### 3、合适的数据量是多少

《阿里巴巴Java开发手册》提出单表行数超过 500 万行或者单表容量超过 2GB，才推荐进行分库分表

### 4、自增id超出上限的问题

假设以一个int类型的id作为自增主键，int的上限是2^31-1(即2147483647)，那么当存在id=2147483647的数据后，再插入，会显示`Duplicate entry`，即出现重复的键，然后禁止插入

所以可以认为，当自增id到达上限后，数据的id不会增加，会重复使用最大的id进行插入。但因为主键已经存在，所以会插入失败

## 二、最大列数

MySQL 对每张表有4096列的硬限制，但是 InnoDB 每张表的限制为1017列。同时还存在部分隐藏列，所以实际列数只会能少

## 三、行大小

行大小限制在了65535字节，但是对于一些特殊的数据类型，比如`text`和`blob`等，它们不在这个限制内。`LONGTEXT`的上限甚至可以达到4GB的级别