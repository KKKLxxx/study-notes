# 布隆过滤器

## 一、概念

布隆过滤器可以看作由**位数组**和**一系列哈希函数**两部分组成的数据结构。相比于我们平时常用的的List、Map、Set等数据结构，它占用空间更少并且效率更高

## 二、使用原理

### 1、添加元素

1、使用哈希函数对元素值进行计算，得到哈希值（有几个哈希函数得到几个哈希值）

2、根据得到的哈希值，在位数组中把对应下标的值置为1

### 2、查询元素

1、使用哈希函数对元素值进行计算，得到哈希值

2、得到值之后判断位数组中的每个元素是否都为1，如果值都为1，那么说明这个值在布隆过滤器中；如果存在一个值不为1，说明该元素不在布隆过滤器中

![布隆过滤器hash计算](https://raw.githubusercontent.com/KKKLxxx/img-host/master/68747470733a2f2f6d792d626c6f672d746f2d7573652e6f73732d636e2d6265696a696e672e616c6979756e63732e636f6d2f323031392d31312f2545352542382538332545392539412538362545382542462538372545362542422541342545352539392541382d686173682545382542462539302545372541452539372e706e67)

## 三、缺陷

根据上述流程，可以知道布隆过滤器的缺陷在于

1、当位数组中存储过多元素时，可能由于哈希冲突，导致误判

2、已经存入的元素很难或者说无法删除，只能重置整个布隆过滤器

## 四、使用场景

1、防止Redis缓存穿透：现在内存中判断元素是否存在，避免所有请求都访问到Redis

2、去重：记录URL，防止爬虫重复爬取

