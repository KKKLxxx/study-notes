# ES常见名词及解释

```java
@Document(indexName = "article4", type = "docs", shards = 1, replicas = 0)
public class Article {

    @TableId(value = "id", type = IdType.AUTO)
    private Integer id;

    @Field(type = FieldType.Text, analyzer = "ik_max_word")
    private String articleName;
}
```



### 一、索引（Index）

一个索引就是一个拥有几分相似特征的文档的集合

比如，你可以有一个客户数据的索引，另一个产品目录的索引，还有一个订单数据的索引。一个索引由一个名字来标识（必须全部是小写字母），并且当我们要对这个索引中的文档进行索引、搜索、更新和删除的时候，都要使用到这个名字

在一个集群中，可以定义任意多的索引

### 二、类型（Type）

可以不用再了解，在以后的版本中将被废除

### 三、文档（Document）

一个文档是一个可被索引的基础信息单元，也就是一条数据

比如：你可以拥有某一个客户的文档，某个订单的文档。文档以 JSON格式来表示

在一个index里，可以存储任意多的文档

### 四、字段（Field）

相当于数据表的字段，对文档数据根据不同属性进行的分类标识

### 五、字段类型（FieldType）

一些示例

```
// 表示该字段是一个文本，并作最大程度拆分，默认建立索引
@Field(type = FieldType.Text, analyzer = "ik_max_word")     

// 表示该字段是一个文本，不建立索引
@Field(type = FieldType.Text, index = false)             

// 表示该字段是一个文本，日期类型，默认不建立索引
@Field(type = FieldType.Date)                                
 
// 表示该字段是一个长整型，默认建立索引
@Field(type = FieldType.Long)                               

// 表示该字段内容是一个文本并作为一个整体不可分，默认建立索引
@Field(type = FieldType.Keyword)                         

// 表示该字段内容是一个浮点类型并作为一个整体不可分，默认建立索引
@Field(type = FieldType.Float)
```

完整的类型如下，最常使用的是Text和Keyword。主要区别在于Text可以被拆分，Keyword不能被拆分，只能用于精确查找

```
Text,
Byte,
Short,
Integer,
Long,
Date,
Half_Float,
Float,
Double,
Boolean,
Object,
Auto,
Nested,
Ip,
Attachment,
Keyword;
```

### 六、映射（Mapping）

mapping是处理数据的方式和规则方面做一些限制，如：某个字段的数据类型、默认值、分析器、是否被索引等等。这些都是映射里面可以设置的，其它就是处理 ES 里面数据的一些使用规则设置也叫做映射，按着最优规则处理数据对性能提高很大，因此才需要建立映射，并且需要思考如何建立映射才能对性能更好

### 七、分片（Shards）

一个索引可以存储超出单个节点硬件限制的大量数据。比如，一个具有 10 亿文档数据的索引占据 1TB 的磁盘空间，而任一节点都可能没有这样大的磁盘空间。或者单个节点处理搜索请求，响应太慢。为了解决这个问题，Elasticsearch 提供了将索引划分成多份的能力，每一份就称之为分片。当你创建一个索引的时候，你可以指定你想要的分片的数量。每个分片本身也是一个功能完善并且独立的“索引”，这个“索引”可以被放置到集群中的任何节点上。

分片很重要，主要有两方面的原因：

1、允许你水平分割 / 扩展你的内容容量

2、允许你在分片之上进行分布式的、并行的操作，进而提高性能/吞吐量

至于一个分片怎样分布，它的文档怎样聚合和搜索请求，是完全由 Elasticsearch 管理的，对于作为用户的你来说，这些都是透明的，无需过分关心

### 八、副本（Replicas）

在一个网络/云的环境里，失败随时都可能发生，在某个分片/节点不知怎么的就处于离线状态，或者由于任何原因消失了。这种情况下，有一个故障转移机制是非常有用并且是强烈推荐的。为此目的，Elasticsearch 允许创建分片的一份或多份拷贝，这些拷贝叫做复制分片(副本)

复制分片之所以重要，有两个主要原因：

1、在分片/节点失败的情况下，提供了高可用性。因为这个原因，**副本不能与主分片置于同一节点上**是非常重要的

2、扩展搜索量/吞吐量，因为搜索可以在所有的副本上并行运行



总之，每个索引可以被分成多个分片。一个索引也可以被复制 0 次（意思是没有复制）或多次。一旦复制了，每个索引就有了主分片和副本之别。分片和复制的数量可以在索引创建的时候指定，在索引创建之后，你**可以在任何时候动态地改变复制的数量，但是你事后不能改变分片的数量**