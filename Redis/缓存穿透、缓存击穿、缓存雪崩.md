# 缓存穿透、缓存击穿、缓存雪崩

## 一、缓存穿透

高并发访问一个并不存在的key，由于不可能缓存命中，导致每次都会访问数据库，从而导致数据库崩溃

**解决方案**：

布隆过滤器：若想判断一个key是否存在可将其放在一个Map中，然而如果使用HashMap会导致空间占用太大。布隆过滤器通过x个hash函数计算出应置1的x位，对于不存在的值直接拒绝查找。**有一定的误判率**

## 二、缓存击穿

高并发访问一个存在的热点key，但此时缓存失效，仍会每次都访问数据库

所以缓存击穿要解决的问题就是在缓存失效到恢复缓存这段时间，将请求阻塞，防止所有请求都访问数据库

**解决方案**：

通过互斥锁，将“查询缓存失败->查询数据库->更新缓存”这段代码互斥执行。保证当缓存失效后，只有一个线程访问数据库，而其他线程因为无法获取锁而阻塞

## 三、缓存雪崩

缓存服务宕机或大量缓存同时失效，导致数据库访问量过大

**解决方案**：

1、通过建立集群确保缓存服务高可用

2、将过期时间尽量分散