# CAP理论

## 一、简介

CAP理论指的是在分布式系统中，有3个指标

C：Consistency，一致性

A：Availability，可用性

P：Partition tolerance，分区容错性

这3个指标不可能同时达到

## 二、Consistency，一致性

一致性即一条线程修改某个数据后，所有线程再读取该数据，得到的值应该是一样的。而系统中往往会存在缓存或者Java中的工作内存的影响，导致数据不一致

## 三、Availability，可用性

意思是只要收到用户的请求，服务器就必须给出回应

## 四、Partition tolerance，分区容错性

因为分布式系统往往会分为多个区，如果一个区崩溃就会导致整个系统无法使用，那么系统的容错率就非常低。所以CAP中一定要保证P

## 五、一致性与可用性的矛盾

比如2个线程的工作内存，如果线程1修改了一个共享变量，且要保证一致性，那么线程2在这段时间无法读取变量，失去了可用性

如果要保证可用性，那么线程1和线程2读取到的数据就可能不一致

所以如果一致性要求高选择CP，否则选AP

